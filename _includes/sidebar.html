<div class="sidebar">
  <div class="container">
    <div class="sidebar-about">
      {% assign posts=site.posts | where:"id", page.id | sort: 'path' %}
      {% assign pages=site.pages | where:"id", page.id | sort: 'path' %}
      <ul class="langswitch">

        {% comment %}
          If we are looking at a post, displays the selected language for it and the other language available
          If we are looking at a page, same logic, but only if it's not the index page
          If it's the index, displays the 2 languages available without any loop (because of paginator which creates multiple indexes)
        {% endcomment%}

        {% for post in posts %}
            <li class="lang">
                <a href="{{ post.url }}" class="{{ post.lang }}">{{ post.lang }}</a>
            </li>
        {% endfor %}

        {% if page.id == "index" %}
          <li class="lang">
              <a href="/" class="en">en</a>
          </li>
          <li class="lang">
              <a href="/fr" class="fr">fr</a>
          </li>
        {% else %}
          {% for page in pages %}
              <li class="lang">
                  <a href="{{ page.url }}" class="{{ page.lang }}">{{ page.lang }}</a>
              </li>
          {% endfor %}
        {% endif %}
      </ul>
      <h1>
        <a href="{{ site.baseurl }}">
          {{ site.title }}
        </a>
      </h1>
      <p class="lead">{{ site.description }}</p>
    </div>

    <nav class="sidebar-nav">
      <a class="sidebar-nav-item{% if page.url == site.baseurl %} active{% endif %}" href="{{ site.baseurl }}/">Home</a>

      {% assign pages_list = site.pages | where:"lang", page.lang | sort: 'order' %}
      {% for node in pages_list %}
        {% if node.title != null %}
          {% if node.layout == "page" %}
            <a class="sidebar-nav-item{% if page.url == node.url %} active{% endif %}" href="{{ node.url }}">{{ node.title }}</a>
          {% endif %}
        {% endif %}
      {% endfor %}
    </nav>

    <p>&copy; {{ site.time | date: '%Y' }}. All rights reserved.</p>
  </div>
</div>